<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net Practice - 42 School</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .level-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .level-btn {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .level-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .level-btn.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .level-info {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .level-info h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .level-info p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .requirements {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #667eea;
        }

        .requirements h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .requirements ul {
            list-style-position: inside;
            color: #555;
        }

        .requirements li {
            margin: 8px 0;
        }

        .topology {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 2px solid #e0e0e0;
        }

        .topology h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .network-diagram {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .host, .router {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #667eea;
        }

        .host h4, .router h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .interface {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 3px solid #764ba2;
        }

        .field {
            margin: 10px 0;
        }

        .field label {
            display: block;
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
        }

        .field input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .field input:focus {
            outline: none;
            border-color: #667eea;
        }

        .field input[readonly] {
            background: #f8f9fa;
            color: #666;
        }

        .hints {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 4px solid #ffc107;
        }

        .hints h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .hints ul {
            list-style-position: inside;
            color: #856404;
        }

        .hints li {
            margin: 8px 0;
        }

        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .result {
            margin-top: 25px;
            padding: 20px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1em;
            text-align: center;
        }

        .result.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .result.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #666;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .level-selector {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            .level-btn {
                padding: 15px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåê Net Practice</h1>
            <p>Master TCP/IP Networking - 42 School Project</p>
        </header>

        <div class="content">
            <div class="level-selector" id="levelSelector">
                <!-- Level buttons will be generated here -->
            </div>

            <div id="levelContent">
                <div class="loading">Select a level to begin practicing!</div>
            </div>
        </div>

        <footer>
            <p>Created for 42 School Net Practice Project</p>
            <p><a href="resources/networking_basics.md" target="_blank">üìö Networking Basics Guide</a> | 
               <a href="solutions/solutions.md" target="_blank">üí° Solutions</a></p>
        </footer>
    </div>

    <script>
        let currentLevel = null;
        let levels = [];

        // Initialize the application
        async function init() {
            await loadLevels();
            renderLevelSelector();
        }

        // Load all level files
        async function loadLevels() {
            for (let i = 1; i <= 10; i++) {
                try {
                    const response = await fetch(`levels/level${i}.json`);
                    const level = await response.json();
                    levels.push(level);
                } catch (error) {
                    console.error(`Error loading level ${i}:`, error);
                }
            }
        }

        // Render level selector buttons
        function renderLevelSelector() {
            const selector = document.getElementById('levelSelector');
            selector.innerHTML = '';

            levels.forEach((level, index) => {
                const btn = document.createElement('button');
                btn.className = 'level-btn';
                btn.textContent = `Level ${level.level}`;
                btn.onclick = () => loadLevel(index);
                selector.appendChild(btn);
            });
        }

        // Load and display a specific level
        function loadLevel(index) {
            currentLevel = levels[index];
            
            // Update active button
            document.querySelectorAll('.level-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === index);
            });

            renderLevel(currentLevel);
        }

        // Render the level content
        function renderLevel(level) {
            const content = document.getElementById('levelContent');
            
            let html = `
                <div class="level-info">
                    <h2>Level ${level.level}: ${level.title}</h2>
                    <p>${level.description}</p>
                    <div class="requirements">
                        <h3>Requirements:</h3>
                        <ul>
                            ${level.requirements.map(req => `<li>${req}</li>`).join('')}
                        </ul>
                    </div>
                </div>

                <div class="topology">
                    <h3>Network Topology</h3>
                    <div class="network-diagram" id="networkDiagram">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>

                <div class="hints">
                    <h3>üí° Hints:</h3>
                    <ul>
                        ${level.hints.map(hint => `<li>${hint}</li>`).join('')}
                    </ul>
                </div>

                <div class="actions">
                    <button class="btn btn-primary" onclick="checkSolution()">‚úì Check Solution</button>
                    <button class="btn btn-success" onclick="showSolution()">üí° Show Solution</button>
                    <button class="btn btn-info" onclick="resetLevel()">‚Üª Reset</button>
                </div>

                <div id="result"></div>
            `;

            content.innerHTML = html;
            renderNetworkDiagram(level);
        }

        // Render the network diagram with input fields
        function renderNetworkDiagram(level) {
            const diagram = document.getElementById('networkDiagram');
            let html = '';

            // Render hosts
            if (level.topology.hosts) {
                level.topology.hosts.forEach(host => {
                    html += `
                        <div class="host">
                            <h4>üñ•Ô∏è ${host.name} (${host.id})</h4>
                            <div class="interface">
                                <div class="field">
                                    <label>IP Address:</label>
                                    <input type="text" 
                                           id="${host.id}-ip" 
                                           value="${host.interface.ip}"
                                           ${host.interface.ip ? 'readonly' : ''}>
                                </div>
                                <div class="field">
                                    <label>Subnet Mask:</label>
                                    <input type="text" 
                                           id="${host.id}-mask" 
                                           value="${host.interface.mask}"
                                           ${host.interface.mask ? 'readonly' : ''}>
                                </div>
                                ${host.gateway !== undefined ? `
                                    <div class="field">
                                        <label>Default Gateway:</label>
                                        <input type="text" 
                                               id="${host.id}-gateway" 
                                               value="${host.gateway || ''}"
                                               ${host.gateway ? 'readonly' : ''}>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    `;
                });
            }

            // Render routers
            if (level.topology.routers) {
                level.topology.routers.forEach(router => {
                    html += `
                        <div class="router">
                            <h4>üîÄ ${router.name} (${router.id})</h4>
                    `;
                    
                    router.interfaces.forEach((iface, idx) => {
                        html += `
                            <div class="interface">
                                <strong>Interface: ${iface.name}</strong>
                                <div class="field">
                                    <label>IP Address:</label>
                                    <input type="text" 
                                           id="${router.id}-${idx}-ip" 
                                           value="${iface.ip || ''}"
                                           ${iface.ip ? 'readonly' : ''}>
                                </div>
                                <div class="field">
                                    <label>Subnet Mask:</label>
                                    <input type="text" 
                                           id="${router.id}-${idx}-mask" 
                                           value="${iface.mask || ''}"
                                           ${iface.mask ? 'readonly' : ''}>
                                </div>
                            </div>
                        `;
                    });

                    html += `</div>`;
                });
            }

            diagram.innerHTML = html;
        }

        // Check the user's solution
        function checkSolution() {
            const result = document.getElementById('result');
            
            // Basic validation - check if all editable fields are filled
            let allFilled = true;
            const inputs = document.querySelectorAll('input:not([readonly])');
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    allFilled = false;
                }
            });

            if (!allFilled) {
                result.className = 'result error';
                result.textContent = '‚ùå Please fill in all empty fields before checking your solution.';
                return;
            }

            // For this demo, we'll just validate that fields are filled
            // In a full implementation, you'd validate IP addresses, subnets, etc.
            result.className = 'result success';
            result.innerHTML = `
                ‚úÖ All fields filled! <br><br>
                <strong>Note:</strong> This is a practice interface. To verify your solution is correct, 
                check the <a href="solutions/solutions.md" target="_blank">solutions guide</a> 
                or use networking commands to test connectivity.
            `;
        }

        // Show solution hints
        function showSolution() {
            const result = document.getElementById('result');
            result.className = 'result';
            result.style.background = '#e7f3ff';
            result.style.color = '#004085';
            result.style.border = '2px solid #b8daff';
            result.innerHTML = `
                üí° For detailed solutions and explanations, please refer to the 
                <a href="solutions/solutions.md" target="_blank" style="color: #004085; font-weight: bold;">
                    Solutions Guide
                </a>
            `;
        }

        // Reset the level
        function resetLevel() {
            if (currentLevel) {
                renderLevel(currentLevel);
                document.getElementById('result').innerHTML = '';
            }
        }

        // Start the application
        init();
    </script>
</body>
</html>
